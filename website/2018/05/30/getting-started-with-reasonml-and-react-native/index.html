<!--
 * @Author: Leland
 * @Date: 2019-12-27 15:59:00
 * @Description: Description
 -->
<!doctype html>
<html>

    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
        <title>å¼€å§‹ä½¿ç”¨ ReasonML å’Œ React Native</title>
        <link href="/css/style.css" rel="stylesheet" />
        <meta name="description" content="å¼€å§‹ä½¿ç”¨ ReasonML å’Œ React Native">
    </head>

    <body>
        <div>
        <div>
        <header class="header">
            <div class="container header-wrap">
                <h1 class="site-name">
                    <a href="/">
                        é¦–é¡µ
                    </a>
                </h1>
                <ul class="nav">
                    {{navs}}
                </ul>
            </div>
        </header>
        </div>
        <div class="container main">
        <div class="page-body">
            <div class="markdown-body">
                <h1>å¼€å§‹ä½¿ç”¨ ReasonML å’Œ React Native</h1>
<p>è¯‘è‡ªï¼šhttps://blog.callstack.io/getting-started-with-reasonml-and-react-native-299476389c3e</p>
<p><img src="/images/1_s4A8_PwjA1Ichs6VnVq3Dg.jpeg" alt="1_s4A8_PwjA1Ichs6VnVq3Dg.jpeg" />
Photo by Will O (https://unsplash.com/photos/St4qInZrYC4)</p>
<blockquote>
<p>ä»¥ä¸‹æ˜¯å¦‚ä½•å¼€å§‹ä½¿ç”¨ React Nativeå’Œ ReasonML çš„æŒ‡å—ã€‚ä¸ºäº†æœ¬åšæ–‡çš„ç›®çš„ï¼Œæˆ‘å‡è®¾æ‚¨å·²ç»ç†Ÿæ‚‰ React Native å¹¶éƒ¨åˆ†ä½¿ç”¨ ReasonML ã€‚å¦‚æœæ‚¨å°šæœªæ¥è§¦è¿‡ ReasonMLï¼Œè¯·æŸ¥çœ‹<a href="https://reasonml.github.io/docs/en/global-installation.html">æ–‡æ¡£</a>ã€‚</p>
</blockquote>
<p>é¦–å…ˆå®‰è£… <a href="https://facebook.github.io/react-native/docs/getting-started.html">React Native CLI</a>ï¼š</p>
<pre><code class="language-ocaml">npm i -g react-native-cli
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ React Native é¡¹ç›®ï¼Œå°±åƒæˆ‘ä»¬å¯¹æ¯ä¸ª React Native åº”ç”¨ç¨‹åºæ‰€åšçš„ä¸€æ ·ï¼š</p>
<pre><code class="language-ocaml">react-native init MyReasonApp
</code></pre>
<h2>æ·»åŠ  â€œ Reason éƒ¨åˆ†â€</h2>
<p>æˆ‘ä»¬å°†éœ€è¦ 3 ä¸ªåŒ…ï¼š</p>
<ul>
<li><a href="https://bucklescript.github.io/docs/en/what-why.html"><code>bs-platform</code></a> - å°† ReasonML / OCaml ç¼–è¯‘ä¸ºå¹²å‡€ï¼Œå¯è¯»å’Œé«˜æ€§èƒ½çš„ JavaScript ä»£ç </li>
<li><a href="https://reasonml.github.io/reason-react"><code>reason-react</code></a> - ReactJS çš„ Reason ç»‘å®š</li>
<li><a href="https://github.com/reasonml-community/bs-react-native"><code>bs-react-native</code></a> - React Native çš„ BuckleScript ç»‘å®š</li>
</ul>
<p>è®©æˆ‘ä»¬å°†å®ƒä»¬æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼š</p>
<pre><code class="language-ocaml">npm i -P bs-platform reason-react bs-react-native
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>bsconfig.json</code> ï¼Œå®ƒæ˜¯ä¸€ä¸ª <a href="https://bucklescript.github.io/docs/en/build-configuration.html">BuckleScript çš„é…ç½®æ–‡ä»¶</a>ï¼š</p>
<pre><code class="language-ocaml">{
    &quot;name&quot;: &quot;my-reason-app&quot;,
    &quot;bsc-flags&quot;: [&quot;-bs-no-version-header&quot;, &quot;-bs-super-errors&quot;],
    &quot;refmt&quot;: 3,
    &quot;bs-dependencies&quot;: [&quot;reason-react&quot;, &quot;bs-react-native&quot;],
    &quot;reason&quot;: {
        &quot;react-jsx&quot;: 2
    },
    &quot;package-specs&quot;: {
        &quot;module&quot;: &quot;commonjs&quot;,
        &quot;in-source&quot;: true
    },
    &quot;sources&quot;: [
        {
            &quot;dir&quot;: &quot;src&quot;,
            &quot;subdirs&quot;: true
        }
    ]
}
</code></pre>
<p>è®©æˆ‘ä»¬åœ¨è¿™é‡Œåœä¸€åˆ†é’Ÿã€‚æœ‰å‡ ä¸ªä¸åŒäºé€šå¸¸çš„è®¾ç½®ã€‚</p>
<p>é¦–å…ˆæ˜¯ <a href="https://bucklescript.github.io/docs/en/build-configuration.html#sources"><code>&quot;subdirs&quot;: true</code></a>ï¼Œä½¿å¾— BuckleScript çŸ¥é“å®ƒåº”è¯¥æ£€æŸ¥åº”è¯¥ç¼–è¯‘çš„ä»£ç çš„å­ç›®å½•ã€‚</p>
<p>å¦ä¸€ä¸ªæ˜¯ <a href="https://bucklescript.github.io/docs/en/build-configuration.html#package-specs"><code>&quot;in-source&quot;: true</code></a> ï¼Œè¿™ä¸ªéå¸¸æ–¹ä¾¿ï¼Œä¸æºæ–‡ä»¶ä¸€èµ·ç”Ÿæˆè¾“å‡ºï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬è¾“å‡ºåˆ° <code>lib/js</code> ç›®å½•ä¸‹ï¼‰ã€‚å½“æˆ‘ä»¬å¼•ç”¨ <code>.js</code> æ–‡ä»¶æˆ–èµ„æºæ–‡ä»¶æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚</p>
<p>æ²¡æœ‰å®ƒï¼Œè¦å¯¼å…¥ä¸€ä¸ªå›¾åƒï¼Œä½ ä¼šå‚è€ƒå®ƒï¼š</p>
<pre><code class="language-ocaml">&lt;Image
  style=Styles.icon
  source=(
    Required(Packager.require(&quot;../../../assets/right.png&quot;))
  )
/&gt;
</code></pre>
<p>ä½¿ç”¨ <code>&quot;in-source&quot;: true</code> ï¼Œå®ƒä¼šçœ‹èµ·æ¥åƒï¼š</p>
<pre><code class="language-ocaml">&lt;Image
  style=Styles.icon
  source=(Required(Packager.require(&quot;./assets/right.png&quot;)))
/&gt;
</code></pre>
<p>æˆ‘æ›´å–œæ¬¢åè€…ï¼Œå› æ­¤æˆ‘å¯ç”¨äº†è¯¥é€‰é¡¹ã€‚</p>
<h2>React Native ä¸­çš„ ReasonML</h2>
<p>æˆ‘ä»¬å®Œæˆäº†é…ç½®ï¼Œå›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸‰ä¸ªè½¯ä»¶åŒ…ï¼š<code>bs-platform</code>ï¼Œ<code>reason-react</code> å’Œ <code>bs-react-native</code>ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ äº† <code>BuckleScript</code> çš„é…ç½®æ–‡ä»¶ <code>bsconfig.json</code>ï¼Œå°±æ˜¯è¿™æ ·ï¼ ğŸ‰</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥å†™ä¸€äº› Reason å§ï¼</p>
<p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰åœ¨ <code>bsconfig.json</code> ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰çš„ ReasonML ä»£ç ä¿å­˜åœ¨ <code>src</code> ç›®å½•ä¸­ã€‚åœ¨æ–°åˆ›å»ºçš„ <code>src</code> ç›®å½•ä¸­ï¼ˆåœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼‰ï¼Œè®©æˆ‘ä»¬æ·»åŠ <code>App.re</code> ï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="language-ocaml">open BsReactNative;

/* è¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€äº›æ ·å¼ */
module Styles = {
    open Style;

    let container = 
        style([
            flex(1.),
            justifyContent(Center),
            alignItems(Center),
            backgroundColor(String(&quot;tomato&quot;)),
        ]);
    let text = style([color(String(&quot;#fff&quot;)), fontSize(Float(24.))]);
};

module Main = {
    let component = ReasonReact.statelessComponent(&quot;Main&quot;);

    let make = _children =&gt; {
        ...component,
        render: _self =&gt;
            &lt;View style=Styles.container&gt;
                &lt;Text style=Styles.text&gt;
                    (ReasonReact.string(&quot;Let's play with ReasonML!&quot;))
                &lt;/Text&gt;
            &lt;/View&gt;,
    };
};

let app = () =&gt; &lt;Main /&gt;;
</code></pre>
<p>æˆ‘è¿˜ä»é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ é™¤äº† <code>App.js</code>ï¼ˆè¿™æ˜¯ç”± React Native CLI ç”Ÿæˆçš„æ–‡ä»¶ï¼‰ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯å°†æˆ‘ä»¬ç¼–è¯‘å¥½çš„ <code>App</code> å¯¼å…¥åˆ° <code>index.js</code> ä¸­ï¼š</p>
<pre><code class="language-ocaml">import { AppRegistry } from 'react-native';
import { app } from './src/App';

/*
 å¦‚æœ &quot;in-source&quot; é€‰é¡¹ä¸º false (é»˜è®¤ä¸º false )ï¼Œæ‚¨å°†ä»¥è¿™ç§æ–¹å¼å¯¼å…¥app:
 import { app } from &quot;./lib/js/src/App.js&quot;;
*/

AppRegistry.registerComponent('MyReasonApp', () =&gt; app);
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ¥ç¼–è¯‘ä»£ç :</p>
<pre><code class="language-ocaml">npm run watch
</code></pre>
<p>è¿™å°†ç›‘è§†æ‚¨å¯¹ Reason ä»£ç æ‰€åšçš„ä»»ä½•æ›´æ”¹å¹¶è¿›è¡Œç¼–è¯‘ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯çš„è¯ï¼‰ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹è¿è¡Œ React Native åº”ç”¨ç¨‹åºï¼š</p>
<pre><code class="language-ocaml">react-native run-ios
</code></pre>
<p>ä½ åº”è¯¥çœ‹åˆ°ï¼š</p>
<p><img src="/images/1_tsDhHE5u-a4v8Url4lXlUw.png" alt="1_tsDhHE5u-a4v8Url4lXlUw.png" /></p>
<p>å¿«ä¹ hacking ! ğŸ‰</p>
<p>è¿™é‡Œæ˜¯ä¸ä¸Šè¿°è®¾ç½®çš„ repo é“¾æ¥ï¼š</p>
<p>https://github.com/knowbody/ReasonReactNativeApp</p>
<p>...</p>
<p><a href="https://twitter.com/matzatorski">åœ¨ Twitter ä¸Šå…³æ³¨ Mateusz Zatorski</a></p>

            </div>
        </div>
        </div>
        </div>
    </body>

</html>
